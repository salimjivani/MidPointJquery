<!DOCTYPE HTML>
<htm1>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	</head>
	
	<body>

		<label>ZipCode 1: </label><input type = 'text' class='zipcodeinput' value='76208'/>
		<br>
		<label>ZipCode 2: </label><input type = 'text' class='zipcodeinput' value='75007'/>
		<br>
		<label>ZipCode 3: </label><input type = 'text' class='zipcodeinput' value='76201'/>
		<br>
		<label>ZipCode 4: </label><input type = 'text' class='zipcodeinput' value='76101'/>
		<br>
		<button>Get Distance</button>
		<p id="distance"></p>
	</body>
			<script>
		
		$("button").click(function() {
		
		var $distance = $("#distance");
		$distance.empty();
		
				var zipcodes = [];	
				
				for(x=0;x<$(".zipcodeinput").length;x++) 
				{
					if ($(".zipcodeinput")[x].value) {
						zipcodes.push($(".zipcodeinput")[x].value);
					}
				}			
			
				var comparezipcode = [];
		
			$(function () {
		
				$.ajax({
					type: 'GET',
					url: 'https://www.zipcodeapi.com/rest/nQBI6jWvYHtLKZXnIQKW53JowAVgIJW6AyPGRLcQsFCcFAznqkjvn3UUDPalz6s9/match-close.json/' + zipcodes.join(",") + '/2000/mile',
					success: function(ziparray) {	
						ziparray.sort(function(a,b) {
							return parseFloat(b.distance) - parseFloat(a.distance);
						});
					
					$distance.prepend("<li>" + ziparray[0].zip_code1 + ":" + ziparray[0].zip_code2 + "</li>");
					
					console.log(ziparray);
					
						$.ajax({
							type: 'GET',
							url: 'https://www.zipcodeapi.com/rest/nQBI6jWvYHtLKZXnIQKW53JowAVgIJW6AyPGRLcQsFCcFAznqkjvn3UUDPalz6s9/radius.json/' + ziparray[0].zip_code1 + '/' + Math.round(ziparray[0].distance/2)*1.1 + '/mile',
							success: function(comparezipsone) {
								$.each(comparezipsone.zip_codes, function(i, comparezipcodes) 
								{
									comparezipcode.push(comparezipcodes.zip_code);
								});
							
							//console.log(comparezipcode);

							}
						});
						
						$.ajax({
							type: 'GET',
							url: 'https://www.zipcodeapi.com/rest/nQBI6jWvYHtLKZXnIQKW53JowAVgIJW6AyPGRLcQsFCcFAznqkjvn3UUDPalz6s9/radius.json/' + ziparray[0].zip_code2 + '/' + Math.round(ziparray[0].distance/2)*1.1 + '/mile',
							success: function(comparezipstwo) {
								$.each(comparezipstwo.zip_codes, function(i, comparezipcodes) 
								{
									comparezipcode.push(comparezipcodes.zip_code);
								});							
							//console.log(comparezipcode);
							
							var duplicates = comparezipcode.reduce(function(acc, el, i, arr) {
							  if (arr.indexOf(el) !== i && acc.indexOf(el) < 0) acc.push(el); return acc;
							}, []);

							console.log(duplicates);
								

								$distance.prepend("<li><strong>" + duplicates + "</strong></li>");

							}
						});
						
					}
				});
			});

		});	
//https://www.zipcodeapi.com/rest/bq0J79sCI9ekZPFsdJpcNoPJv12eZLMabMUjWnWEwaZw0EZenpraOgUjhXxhIjsU/match-close.json/76208,75007,75067,76203,90293/2000/mile


/*


<div>
    <div id="map" style="width: 500px; height: 400px;"></div>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
</div>
<script>
    function initialize() {
        var locations = [
            ['Passage Island', 32.925764, -97.071653],
            ['Point Atkinson', 32.959856,  -97.148431],
            ['Passage Island', 32.930005, -97.069938],
            ['Passage Island', 33.009358,  -97.22693],
            ['Passage Island', 32.989995,  -97.229792],
        ];
        console.log('in')
        var mapOptions = {
            center: new google.maps.LatLng(32.925764, -97.071653),
            zoom: 10,
            mapTypeControl: false,
            panControl: false,
            streetViewControl: false,
            zoomControl: false,
            disableDoubleClickZoom: true,
        };
        var map = new google.maps.Map(document.getElementById('map'), mapOptions);
        var marker, i;

        for (i = 0; i < locations.length; i++) {
            var p = new google.maps.LatLng(locations[i][1], locations[i][2]);
            marker = new google.maps.Marker({
                position: p,
                map: map
            });
        }
    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script>


//http://stackoverflow.com/questions/840781/easiest-way-to-find-duplicate-values-in-a-javascript-array
*/

		</script>
</html>
